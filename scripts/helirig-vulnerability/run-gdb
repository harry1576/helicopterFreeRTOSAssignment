#!/usr/bin/python
'''
run-gdb: A script to run defined gdb scripts on the HeliRigs,

NOT TO BE USED MALICIOUSLY!

Author:
Jos Craw
'''
import argparse
import subprocess
import time

def main():
    parser = argparse.ArgumentParser(description='Runs code on the HeliRigs for any user')

    parser.add_argument('-s', '--script', nargs=1, help='The script to run on the remote rig', required=True)

    args = parser.parse_args()

    script_to_run = './gdb-scripts/{}.cfg'.format(args.script[0])
    
    if input("Are you sure you want to run {}? [y/N] ".format(args.script[0])).lower() == 'y':
        print("Running!")
        subprocess.call(["arm-none-eabi-gdb", "-x", script_to_run])
        exit(0)
    print("Exiting...")

if __name__ == "__main__":
    main()